\subsection{Operational Semantics}
\label{sec:oper-semantics}

\begin{syntax}
  \category[Redices]{R}
  \alternative{\RDone{L}{e_1}{e_2}}
  \alternative{\RArg{R}}
  \alternative{\RFun{R}}
  \alternative{\RApp}
  \alternative{\RRec}\\
  \alternative{\RSend{R}{L}}
  \alternative{\RSendV{L_1}{v}{L_2}}
  \alternative{\RSync{L_1}{d}{L_2}}\\
  \alternative{\RIf{L}{R}}
  \alternative{\RIfTrue{L}}
  \alternative{\RIfFalse{L}}\\
  \alternative{\RTFun{R}}
  \alternative{\RTApp}\\
  \alternative{\RLet{L}{v}}
  \alternative{\RTellLet{L}{t}{\rho}}
\end{syntax}

\begin{mathparpagebreakable}
  \rloc{\RDone{L}{e_1}{e_2}} = \{L\} \and
  \rloc{\RArg{R}} = \rloc{R} \and
  \rloc{\RFun{R}} = \rloc{R} \and
  \rloc{\RApp} = \Locations \and
  \rloc{\RRec} = \Locations \and
  \rloc{\RSend{R}{L}} = \{L\} \cup \rloc{R} \and
  \rloc{\RSendV{L_1}{v}{L_2}} = \{L_1,L_2\} \and
  \rloc{\RSync{L_1}{d}{L_2}} = \{L_1,L_2\} \and
  \rloc{\RIf{L}{R}} = \rloc{R} \and
  \rloc{\RIfTrue{L}} = \{L\} \and
  \rloc{\RIfFalse{L}} = \{L\} \and
  \rloc{\RTFun{R}} = \rloc{R} \and
  \rloc{\RTApp} = \Locations \and
  \rloc{\RLet{L}{v}} = \{L\} \and
  \rloc{\RTellLet{L}{t}{\rho}} = \{L\} \cup \rho
\end{mathparpagebreakable}

\begin{mathparpagebreakable}
  \infer[DoneE]{e_1 \localstep e_2}
  {L.e_1 \step{\RDone{L}{e_1}{e_2}} L.e_2} \and

  \infer[AppFun]{C_1 \step{R} C_1'}
  {C_1~C_2 \step{\RFun{R}} C_1'~C_2} \and

  \infer[AppArg]{C_2 \step{R} C_2'}
  {C_1~C_2 \step{\RArg{R}} C_1~C_2'} \and

  \infer[App]{\text{Value}(V)}
  {(\lambda X \ty \tau.C)~V \step{\RApp} \subst{C}{X}{V}} \and

  \infer[Rec]{~}
  {\mu X \ty \tau.C \step{\RRec} \subst{C}{X}{\mu X \ty \tau.C}} \and

  \infer[SendE]{C \step{R} C' \\
    L_1 \notin \rloc{R}}
  {C \ChorSend[L_1] L_2 \step{\RSend{R}{L_1}} C' \ChorSend[L_1] L_2} \and

  \infer[SendV]{\text{Value}(v) \\
    L_1, L_2 \notin \rloc{R}}
  {L_1.v \ChorSend[L_1] L_2 \step{\RSendV{L_1}{v}{L_2}} L_2.v} \and

  \infer[SyncI]{C \step{R} C' \\
    L_1, L_2 \notin \rloc{R}}
  {\syncs{L_1}{d}{L_2} \seq C \step{R} \syncs{L_1}{d}{L_2} \seq C'} \and

  \infer[Sync]{~}
  {\syncs{L_1}{d}{L_2} \seq C \step{\RSync{L_1}{d}{L_2}} C} \and

  \infer[IfE]{C \step{R} C'}
  {\ITE[L]{C}{C_1}{C_2} \step{\RIf{L}{R}} \ITE[L]{C'}{C_1}{C_2}} \and

  \infer[IfI]{C_1 \step{R} C_1' \\
    C_2 \step{R} C_2' \\
    L \notin \rloc{R}}
  {\ITE[L]{C}{C_1}{C_2} \step{R} \ITE[L]{C}{C_1'}{C_2'}} \and

  \infer[IfT]{~}
  {\ITE[L]{L.\True}{C_1}{C_2} \step{\RIfTrue{L}} C_1} \and

  \infer[IfF]{~}
  {\ITE[L]{L.\False}{C_1}{C_2} \step{\RIfFalse{L}} C_2} \and

  \infer[LocalLetArg]{C_1 \step{R} C_1'}
  {\LetIn{L.x \ty t_e}{C_1}{C_2} \step{\RArg{R}} \LetIn{L.x \ty t_e}{C_1'}{C_2}} \and

  \infer[LocalLetI]{C_2 \step{R} C_2' \\
    L \notin \rloc{R}}
  {\LetIn{L.x \ty t_e}{C_1}{C_2} \step{R} \LetIn{L.x \ty t_e}{C_1}{C_2'}} \and

  \infer[LocalLet]{\text{Value}(v)}
  {\LetIn{L.x \ty t_e}{L.v}{C} \step{\RLet{L}{v}} \subst{C}{L.x}{v}} \and

  \infer[TellLetArg]{C_1 \step{R} C_1'}
  {\LetTellIn{\alpha \knd \kappa}{L}{C_1}{\rho}{C_2} \step{\RArg{R}} \LetTellIn{\alpha \knd \kappa}{L}{C_1'}{\rho}{C_2}} \and

  \infer[TellLetI]{C_2 \step{R} C_2' \\
    L \notin \rloc{R} \\
    \rho \cap \rloc{R} = \varnothing}
  {\LetTellIn{\alpha \knd \kappa}{L}{C_1}{\rho}{C_2} \step{R} \LetTellIn{\alpha \knd \kappa}{L}{C_1}{\rho}{C_2'}} \and

  \infer[TellLet]{\text{Value}(v)}
  {\LetTellIn{\alpha \knd \kappa}{L}{\say{t}}{\rho}{C} \step{\RTellLet{L}{t}{\rho}} \subst{C}{\alpha}{t}} \and
\end{mathparpagebreakable}

% \begin{figure}[h]
%   \begin{syntax}
%     \category[Redices]{R}
%     \alternative{L.(e_1 \Rightarrow e_2)}
%     \alternative{L.\text{if}\;R}
%     \alternative{L.\text{if}\;\text{true}}
%     \alternative{L.\text{if}\;\text{false}}\\
%     \alternative{R \overset{L_1}{\rightsquigarrow} L_2}
%     \alternative{L_1.(v\;\text{value}) \overset{L_1}{\rightsquigarrow} L_2}\\
%     \alternative{L_1[d] \rightsquigarrow L_2}
%     \alternative{\text{Sync}}\\
%     \alternative{\text{let}\;x := (V \;\text{Value})}
%     \alternative{\text{Arg}(R)}
%     \alternative{\text{Fun}(R)}\\
%     \alternative{\text{Fun}\beta}
%     \alternative{\text{Loc}\beta}
%   \end{syntax}

%   \caption{Redices}
%   \label{fig:redices}
% \end{figure}

% \begin{mathparpagebreakable}
  % \infer[DoneE]{
  % e_1 \localstep e_2}
  % {L.e_1 \step{L.(e_1 \Rightarrow e_2)} L.e_2} \and

%   \infer[SendE]{C_1 \step{R} C_2}
%   {C_1 \overset{L_1}{\rightsquigarrow} L_2 \step{R} C_2 \overset{L_1}{\rightsquigarrow} L_2} \and

%   \infer[IfE]{C \xRightarrow{R\hfill{}\mathcal{B}}_c C'}
%   {L.\text{if}\; C \;\text{then}\; C_1 \;\text{else}\; C_2 \xRightarrow{L.\text{if}\;R\hfill{}\mathcal{B}}_c L.\text{if}\; C' \;\text{then}\; C_1 \;\text{else}\; C_2} \and

%   \infer[IfI]{C_1 \xRightarrow{R\hfill{}\mathcal{B} \cup \{L\}}_c C_1' \\
%     C_2 \xRightarrow{R\hfill{}\mathcal{B} \cup \{L\}}_c C_2'}
%   {L.\text{if}\; C \;\text{then}\; C_1 \;\text{else}\; C_2 \xRightarrow{R\hfill{}\mathcal{B}}_c L.\text{if}\; C \;\text{then}\; C_1' \;\text{else}\; C_2'} \and

%   \infer[IfT]{L \notin \mathcal{B}}
%   {L.\text{if}\; L.\text{true} \;\text{then}\; C_1 \;\text{else}\; C_2 \xRightarrow{L.\text{if}\;\text{true}\hfill{}\mathcal{B}}_c C_1} \and

%   \infer[IfF]{L \notin \mathcal{B}}
%   {L.\text{if}\; L.\text{false} \;\text{then}\; C_1 \;\text{else}\; C_2 \xRightarrow{L.\text{if}\;\text{false}\hfill{}\mathcal{B}}_c C_2} \and

%   \infer[SyncI]{C_1 \xRightarrow{R\hfill{}\mathcal{B} \cup \{L_1, L_2\}}_c C_2}
%   {L_1[d] \rightsquigarrow L_2; C_1 \xRightarrow{R\hfill{}\mathcal{B}}_c L_1[d] \rightsquigarrow L_2; C_2} \and

%   \infer[Sync]{L_1, L_2 \notin \mathcal{B}}
%   {L_1[d] \rightsquigarrow L_2; C \xRightarrow{\text{Sync}\hfill{}\mathcal{B}}_c C} \and

%   \infer[DefI]{C_1 \xRightarrow{R\hfill{}\mathcal{B}}_c C_1'}
%   {\text{let}\; x := C_1 \;\text{in}\; C_2 \xRightarrow{\text{Arg}(R)\hfill{}\mathcal{B}}_c \text{let}\; x := C_1' \;\text{in}\; C_2} \and

%   \infer[Def]{\text{Value}(V)}
%   {\text{let}\; x := V \;\text{in}\; C \xRightarrow{\text{let}\; x := (V \;\text{Value})\hfill{}\mathcal{B}}_c C[x \mapsto V]} \and

%   \infer[AppFun]{C_1 \xRightarrow{R\hfill{}\mathcal{B}}_c C_1'}
%   {C_1 \; C_2 \xRightarrow{\text{Fun}(R)\hfill{}\mathcal{B}}_c C_1' \; C_2} \and

%   \infer[AppArg]{C_2 \xRightarrow{R\hfill{}\mathcal{B}}_c C_2'}
%   {C_1 \; C_2 \xRightarrow{\text{Arg}(R)\hfill{}\mathcal{B}}_c C_1 \; C_2'} \and

%   \infer[App]{\text{Value}(V)}
%   {(\text{fun}\; F(x) := C) \; V \xRightarrow{\text{Fun}\beta\hfill{}\emptyset}_c C[x \mapsto V, F \mapsto \text{fun}\; F(x) := C]} \and

%   \infer[LocApp]{}
%   {(\Lambda x.C) \; L \xRightarrow{\text{Loc}\beta\hfill{}\emptyset}_c C[x \mapsto L]} \and
% \end{mathparpagebreakable}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "conference"
%%% End:
