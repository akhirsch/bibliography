\section{Endpoint Projection}
\label{sec:endpoint-projection}
As is common for choreographic languages, our compilation procedure takes the  form of an \emph{endpoint projection} operation.
For each location participating in a choreography, this procedure extracts the program that the specified location will execute in the form of a \emph{control language}.
The extracted control programs can execute local computations, and perform send and receive operations.
A choreography, even when well-typed, may fail to project for a specific location.
If the choreography can be successfully projected for all participants, then we can compose them in parallel to provide an interpretation for the entire program.
Here we explain our control language, the endpoint projection procedure, and show that it preserves and reflects the semantics of choreographies.

\input{control_lang}

\subsection{Endpoint Projection Procedure}
\label{sec:epp-defined}
\todo Explain epp. Form of compilation that gives each location their part of the choreography. Say that epp is partial for us because control program merging is partial. Note that merging is used in if-then-else projection.

\todo Explain epp. for systems
\begin{mathpar}
  \epp{C}{\Locations} = L \mapsto \epp{C}{L}
\end{mathpar}

\input{proj_correct}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "conference"
%%% End: